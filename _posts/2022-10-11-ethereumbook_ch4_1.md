---
layout: post                           # (require) default post layout
title: "마스터링 이더리움 ch4_1"            # (require) a string title
date: 2022-10-11 19:00:00 +0900        # (require) a post date
categories: [all, ethereum, blockchain, 마스터링 이더리움]  # (custom) some categories, but makesure these categories already exists inside path of `category/`
---

# 마스터링 이더리움 ch4 암호학
'마스터링 이더리움 스마트 컨트랙트 및 댑 구축하기' 책의 세미나
제 4장 일반 암호학

## 암호 역사
암호란 중요한 정보를 다른 사람들이 보지 못하도록 하는 방법   
평문을 해독 불가능한 형태로 변형하거나 암호화된 통신문을 원래의 해독 가능한 상태로 변환하기 위한 모든 수학적인 원리, 수단, 방법 등을 취급하는 기술이나 과학   
어원: 그리스어의 비밀이란 뜻을 가진 크립토스(Kryptos)
* 고대 암호
  * 멀리 기밀 정보를 전달해야 하는 경우에는 사자의 머리를 깎고 메시지를 쓴 후 머리를 길러서 보내면 받는 측에서는 사자의 머리를 깎고 메시지를 읽도록 하는 경우도 있었음
  * 스테가노그래피(Steganography): 종이에 쓴 메시지가 그냥 보이지 않지만 불빛에 약품 처리를 하면 메시지가 나타나도록 하는 방법(⇒ 현대: 워터마킹, 은닉채널(은닉메시지))
  * 스키테일 암호, 시저(Caesar) 암호, 악보 암호 등
* 근대 암호
  * 17세기
    * 근대 수학의 발전과 함께 암호 기술도 발전하기 시작
    * Vigenere가 고안한 키워드를 이용한 복수 시저 암호형 방식
    * Playfair가 만든 2문자 조합 암호
  * 20세기
    * 통신 기술의 발전과 기계식 계산기에 대한 연구를 바탕으로 두 차례의 세계 대전을 통해 암호 설계와 해독에 대한 필요성이 높아지면서 암호에 대한 연구가 더욱 활발하게 진행
  * 근대 암호의 이론적 기초가 된 논문
    * 1920년 Freidman이 발표한 '일치 반복률과 암호 응용'
    * 1949년 Shannon이 발표한 '비밀 시스템의 통신 이론'
  * 에니그마
    * 2차 세계대전 중 독일군이 사용
    * 각기 다른 몇 개의 암호판을 전기적으로 연결하여 원문을 입력하면 전기적 연결에 의해 새로운 암호문을 출력하는 방식으로 이 기계가 존재하지 않으면 암호를 풀 수 없음
    * Freidman이 해독
* 현대 암호
  * Diffie-Hellman 최초의 공개키 암호 방식
    * 1976년 스탠퍼드 대학의 Diffie와 Hellman, '암호의 새로운 방향(New Directions in Cryptography)'
    * 공개키 암호 방식에서는 하나의 쌍이 되는 공개키와 비밀키를 생성하여 암호화에 사용되는 공개키는 공개하고, 복호화에 사용되는 비밀키는 사용자가 안전하게 보관
  * RSA 공개키 암호 방식
    * 1978년 MIT 대학의 Rivest, Shamir, Adleman은 소인수 분해 문제에 기반을 둔 RSA 공개키 암호를 개발
    * 오늘까지도 가장 널리 사용되는 공개키 암호 방식
  * DES (Data Encryption Standard) 비밀키 암호 방식
    * IBM사가 제안한 DES (Data Encryption Standard)를 표준 암호 알고리즘 개발
    * DES의 표준화를 계기로 하여 금융 시스템을 중심으로 상업용 암호화의 이용이 증가하게 되었고 컴퓨터 통신망을 이용한 문서 전송, 전자 자금 이체 등이 활성화되었으며 암호 방식이 일반인들에게 알려지고 널리 사용되는 계기가 됨
  * 암호 알고리즘을 공개하도록 하고 있음
  * 케르크호프스의 원리
    * 암호 방식의 안전성을 공개적으로 검토하게 하여 안전성을 확인
    * 암호체계의 안전성은 키의 비밀성에만 의존
  * 암호 체계는 '무죄가 증명될 때까지는 유죄'
* 차세대 암호
  * 양자컴퓨팅
    * Shor
      * 인수분해 문제 해결 속도 단축
      * RSA, ECC 등 인수분해 및 이산대수 기반의 공개키 암호 알고리즘이 더이상 안전하지 않음
    * Grover
      * 정렬되지 않은 데이터베이스의 원소를 검색하는 속도 향상
      * 대칭키: 키 사이즈 증가 필요
      * 해시: 암호 알고리즘의 출력 길이 증가 필요
  * 암호기술
    * 양자내성암호(Post Quantum Cryptography,PQC)
      * 양자컴퓨팅 환경에서도 안전하게 사용할 수 있는 공개키 암호 기술
    * 동형암호(Fully Homomorphic Encryption)
      * 암호화된 상태로 연산 가능한 암호
    * 형태보존암호(Format Preserving Encryption)
      * 암호문이 평문과 동일한 형태를 가지는 암호
    * 경량암호(Lightweight Cryptography)
      * 계산능력이 떨어지는 IoT 환경 등에서 효율적으로 사용할 수 있는 암호

## 암호 기술
* 중요한 정보를 읽기 어려운 값으로 변환하여 제 3자가 볼 수 없도록 하는 기술
* 안전성은 수학적인 원리에 기반
* 보안에 있어서 중요한 정보를 직접적으로 보호하는 원천기술
* 기밀성(Confidentiality)
  * 허락되지 않은 사용자 또는 객체가 정보의 내용을 알 수 없도록 하는 성질
* 무결성(Integrity)
  * 허락되지 않은 사용자 또는 객체가 정보를 함부로 수정할 수 없도록 하는 성질, 위변조 방지
* 인증(Authentication)
  * 사용자 또는 객체의 디지털 정체성을 식별
* 부인방지(Non-repudiation)
  * 정보를 보낸 사람이 나중에 정보를 보냈다는 것을 부인하지 못하도록 함

## 대칭키
* 대칭키(Symmetric-key Cryptography) 암호
  * 비밀키 암호, 관용키 암호, 단일키 암호
  * 암ㆍ복호화에 같은 암호 키를 사용하는 알고리즘
  * 송신자와 수신자는 암호 키가 노출되지 않도록 비밀로 관리
  * 장점: 내부 구조가 간단한 치환과 전치의 조합으로 되어 있어 연산 속도가 빠름
  * 단점: 송ㆍ수신자 간에 동일한 키를 공유해야 하므로 많은 사람들과의 정보 교환 시 많은 키를 관리해야 하는 어려움
  * 필요한 키 개수: 서로 다른 2명마다 1개씩, NC2 = N(N-1)/2
  * 블록 암호, 스트림 암호가 있음

### 블록 암호
* 블록 암호를 다양하게 응용하기 위해 NIST에서 정의한 5가지 운영모드
* 대표적인 블록 암호 알고리즘인 DES와 AES를 포함하여 어떤 대칭 블록 암호 알고리즘에도 적용 가능
* 하나의 키를 사용하여 반복적으로 블록 암호를 수행하기 위해 이용
* 모드 종류
  * ECB모드(전자 부호표 모드, Electronic CodeBook Mode)
  * CBC모드(암호 블록 연쇄 모드, Cipher Block Chaining Mode)
  * CFB모드(암호 피드백 모드, Cipher-FeedBack Mode)
  * OFB모드(출력 피드백 모드, Output-FeedBack Mode)
  * CTR모드(Counter Mode, 카운터 모드
* 블록 암호화 운영 모드 정리
  * 순수한 블록 암호 모드: ECB, CBC
  * 스트림 암호방식 블록 암호 모드: CFB, OFB, CTR
  * EBC: 간단, 병렬 처리 가능, 재전송 공격 가능
  * CBC: 복호화시 병렬 처리 가능, 오류전파
  * CFB: 복호화시 병렬 처리 가능, 패딩 없음, 암호화 모듈만 필요, 오류전파
  * OFB: 전처리 가능, 패딩 없음, 암호화 모듈만 필요, 병렬 처리 불가
  * CTR: 전처리 가능, 패딩 없음, 암호화 모듈만 필요, 병렬 처리 가능
  
## 비대칭키 암호
* 공개키 암호(Public-key Encryption)
* 대칭키 암호와 달리 암·복호화에 서로 다른 키를 사용하는 알고리즘
* 송신자는 수신자의 공개키를 이용하여 암호화
* 수신자는 자신의 공개키로 암호화된 암호문을 자신의 개인키로 복호화
* 수학적인 난제를 기반으로 설계
* 단점: 복잡한 수학 연산을 사용하기 때문에, 대칭키 암호에 비해 효율성이 떨어질 수 있음
* 장점: 여러 송신자가 하나의 공개키로 암호화를 수행하기 때문에 사용자가 많더라도 키를 관리하는 데에 유리
* RSA, ElGamal, ECC 등
* 필요한 키 개수: 사람 당 2개씩(공개키, 개인키), 2N
* 전자서명
  * 공개키 암호를 거꾸로 활용하는 방식
  * DSA, RSA SIgnature, ECDSA

### 암호 키 사용 구분
* 비대칭키 암호
  * 평문 -> 암호화 수신자 공개키 -> 암호문 -> 복호화 수신자 개인키 -> 평문
* 전자서명
  * 평문 -> 암호화 송신자 개인키 -> 암호문 -> 복호화 수신자 공개키 -> 평문

## 해시 함수
* 임의의 길이의 메시지를 입력으로 받아 고정된 길이의 해시 값을 출력
* 암호 키가 사용되지 않기 때문에, 같은 입력에 대해서 항상 같은 해시 값을 얻을 수 있음
* 입력 메시지에 대한 변경할 수 없는 증거 값을 만들어냄으로서, 주로 무결성을 제공하는 목적에 사용
* 메시지인증코드(MAC, Message Authentication Code)의 형태로 사용될 수 있음
* 전자서명에도 활용: 전체 메시지가 아닌 짧은 해시 값에 전자 서명을 계산하면 효율적으로 서명 값을 생성
* MD5, HAS-160, SHA-1, SHA-2, SHA-3

## Diffie-Hellman
최초의 공개키 암호 알고리즘   
1976년, 미국 스탠퍼드 대학의 연구원 휫필드 디피(Whitfield Diffie)와 마틴 헬만(Martin Hellman)이 공동 개발
* 두 사용자가 사전에 어떤 비밀 교환 없이도 공통키를 교환하게 해주는 알고리즘
* 상대방의 공개키와 나의 공개키를 이용하여 계산을 하면 비밀키가 나옴
* 나와 상대방은 생성된 비밀키를 사용하여 데이터를 암호화한 후 전달
* 키 교환(Key exchange) 알고리즘으로 대칭키를 공유하는데 사용
* 디피-헬만 키 교환은 가장 기초가 되는 암호학적 통신 방법을 만들었으며 RSA 암호화 알고리즘의 바탕이 되기도 했음
* 암호화나 전자서명을 위한 것은 아님
* IPSec VPN의 IKE(Internet Key Exchange)로 사용
* ECDH(Elliptic-Curve Diffie–Hellman): 이산대수 문제인 모듈로 지수 연산의 어려움을 이용한 Diffie-Hellman의 지수 연산을 타원 곡선의 곱하기 연산으로 대체
* 장점
  * 이산 대수 문제의 어려움에 기반하고 있기 때문에 안전성이 유지
  * 대칭키를 비밀스럽게 생성할 수 있는데, 비밀키를 필요할 때마다 다르게 생성하여 비밀키 보관에 따른 노출 위험성이 작아짐
* 단점
  * 중간자 공격에 취약
  * 상대방에 대한 인증 기능이 없음
* 중간자
  * 송신자와 수신자 사이에서 송신자에 대해서는 수신자처럼, 수신자에 대해서는 송신자처럼 행세하는 공격

## RSA
공개키 암호시스템의 하나, 산업 표준   
암호화뿐만 아니라 전자서명이 가능한 최초의 알고리즘
* 일반적인 공개키 암호화는 공개키로 암호화하고 개인키로 복호화만 지원
* RSA는 개인키로 암호화하고 공개키로 복호화 가능(전자서명)
* RSA 암호체계의 안정성은 큰 숫자를 소인수 분해하는 것이 어렵다는 것에 기반
* 큰 수의 소인수 분해를 획기적으로 빠르게 할 수 있는 알고리즘이 발견된다면 이 암호 체계는 가치가 떨어짐
* 장점
  * 소인수 분해의 어려움에 기반하고 있기 때문에 안전성이 유지
  * 대칭키를 비밀스럽게 생성할 수 있는데, 비밀키를 필요할 때마다 다르게 생성하여 비밀키 보관에 따른 노출 위험성이 작아짐
* 단점 
  * 계산량이 많아 속도가 느린 것, 이 문제를 해결하기 위해 타원 곡선 알고리즘 등장
* 양자 컴퓨터
  * 1993년 피터 쇼어는 쇼어 알고리즘을 발표
  * 양자 컴퓨터를 이용하여 임의의 정수를 빠른 시간 안에 소인수 분해하는 방법을 발표
  * 양자 컴퓨터가 본격적으로 실용화되면 RSA 알고리즘은 무용지물이 될 것임
  * 양자 컴퓨터가 이 정도 수준으로 실용화되려면 시간이 더 필요