<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>달상자 Blog</title>
    <description>공부하려고 만든 블로그</description>
    <link>https://hanscom95.github.io/</link>
    <atom:link href="https://hanscom95.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 09 Mar 2022 13:25:28 +0900</pubDate>
    <lastBuildDate>Wed, 09 Mar 2022 13:25:28 +0900</lastBuildDate>
    <generator>Jekyll v3.9.0</generator>
    
      <item>
        <title>마스터링 비트코인 ch6</title>
        <description>&lt;h1 id=&quot;마스터링-비트코인-ch6-거래&quot;&gt;마스터링 비트코인 ch6 거래&lt;/h1&gt;

&lt;h2 id=&quot;1-서론&quot;&gt;1. 서론&lt;/h2&gt;
&lt;p&gt;6장에서 설명하는 지갑은 키가 들어 있는 데이터베이스가 아니라 거래를 구성하는 소프트웨어라고 되어 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;거래란 비트코인 시스템 내에 있는 참가자들 간 가치를 전송하는 행위를 인코딩한 데이터 구조&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-거래-세부-사항&quot;&gt;2. 거래 세부 사항&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;비트코인 어플리케이션 사용자 인터페이스에서 볼 수 있는 고급 구성 요소들은 비트코인 시스템 내에 실제로 존재하지 않는다.
    &lt;blockquote&gt;
      &lt;p&gt;‘실제로 존재하지 않거나 단일 거래에 존재하지 않는다’가 맞는 표현 같음&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;아래 코드는 Raw 트랜잭션을 검색하고 디코딩 내용 이다. 해당 내용으로는 코인, 발신자, 수신자, 잔액, 계정 및 주소가 없다.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bitcoin-cli getrawtransaction 7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18
0100000001524d288f25cada331c298e21995ad070e1d1a0793e818f2f7cfb5f6122ef3e71000000008c493046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d014104e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8dffffffff0180969800000000001976a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac00000000

$ bitcoin-cli decoderawtransaction 0100000001524d288f25cada331c298e21995ad070e1d1a0793e818f2f7cfb5f6122ef3e71000000008c493046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d014104e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8dffffffff0180969800000000001976a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac00000000
{
  &quot;txid&quot;: &quot;7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18&quot;,
  &quot;hash&quot;: &quot;7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18&quot;,
  &quot;version&quot;: 1,
  &quot;size&quot;: 225,
  &quot;vsize&quot;: 225,
  &quot;weight&quot;: 900,
  &quot;locktime&quot;: 0,
  &quot;vin&quot;: [
    {
      &quot;txid&quot;: &quot;713eef22615ffb7c2f8f813e79a0d1e170d05a99218e291c33daca258f284d52&quot;,
      &quot;vout&quot;: 0,
      &quot;scriptSig&quot;: {
        &quot;asm&quot;: &quot;3046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d[ALL] 04e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8d&quot;,
        &quot;hex&quot;: &quot;493046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d014104e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8d&quot;
      },
      &quot;sequence&quot;: 4294967295
    }
  ],
  &quot;vout&quot;: [
    {
      &quot;value&quot;: 0.10000000,
      &quot;n&quot;: 0,
      &quot;scriptPubKey&quot;: {
        &quot;asm&quot;: &quot;OP_DUP OP_HASH160 7f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a8 OP_EQUALVERIFY OP_CHECKSIG&quot;,
        &quot;hex&quot;: &quot;76a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac&quot;,
        &quot;address&quot;: &quot;1Cdid9KFAaatwczBwBttQcwXYCpvK8h7FK&quot;,
        &quot;type&quot;: &quot;pubkeyhash&quot;
      }
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3-거래-출력값과-입력값&quot;&gt;3 거래 출력값과 입력값&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;UTXO(Unspent Transaction output)&lt;br /&gt;
소비되지 않은 거래 출력값&lt;/li&gt;
  &lt;li&gt;거래
    &lt;ul&gt;
      &lt;li&gt;모든 거래는 UTXO세트 내의 변화(상태 변화)를 의미&lt;/li&gt;
      &lt;li&gt;아래 그림의 UTXO세트에서 점선은 UTXO세트에서 제외될 것이며 녹색 바탕은 UTXO세트로 추가&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;출력값
    &lt;ul&gt;
      &lt;li&gt;개별적&lt;/li&gt;
      &lt;li&gt;나눌 수 없는 가치의 단위&lt;/li&gt;
      &lt;li&gt;정수로 된 사토시 단위로 표현&lt;/li&gt;
      &lt;li&gt;소비되지 않은 출력값을 거래에서 통째로 소비될 수만 있음
        &lt;ul&gt;
          &lt;li&gt;잔액은 해당 거래에 출력값으로 추가되며 다른 거래의 입력값이 됨&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;코인베이스 거래
    &lt;ul&gt;
      &lt;li&gt;입력값과 출력값에 대한 특수한 유형의 거래&lt;/li&gt;
      &lt;li&gt;각 블록 내의 첫번째 거래&lt;/li&gt;
      &lt;li&gt;채굴에 성공한 채굴자에 의해 생성&lt;/li&gt;
      &lt;li&gt;새 비트코인 생성&lt;/li&gt;
      &lt;li&gt;UTXO를 소비하지 않고 코인베이스라는 이름을 가짐
        &lt;ul&gt;
          &lt;li&gt;vin.txid 대신 vin.coinbase&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch6_1.png&quot; alt=&quot;그림1&quot; /&gt;&lt;br /&gt;
그림1 블록체인을 기반으로 구축되는 Joe에서 Gopesh까지의 트랜잭션 체인&lt;/p&gt;

&lt;h3 id=&quot;31-거래-출력값&quot;&gt;3.1 거래 출력값&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;거래 출력값 구성
    &lt;ul&gt;
      &lt;li&gt;비트코인의 최소 단위인 사토시로 표현되는 비트코인 금액&lt;/li&gt;
      &lt;li&gt;출력값을 소비하기 위해 필요한 조건을 결정하는 암호 퍼즐&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;암호퍼즐
    &lt;ul&gt;
      &lt;li&gt;잠금 스크립트(locking script), 서명 스크립트(witness script), scriptPubKey&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;decoderawtransaction 중 vout(위에 코드 값으로 확인)
    &lt;ul&gt;
      &lt;li&gt;value.scriptPubKey만 저장됨&lt;/li&gt;
      &lt;li&gt;그 외 값은 어플리케이션에서 해석&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Size&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Field&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;8 bytes(little-endian)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Amount&lt;/td&gt;
      &lt;td&gt;Bitcoin value in satoshis(10^-8 bitcoin)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1-9 bytes(VarInt)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Locking-Script Size&lt;/td&gt;
      &lt;td&gt;Locking-Script length in bytes, to follow(실제로 1~9 bytes 중 몇 byte인지 어떻게 확인할 수 있을까?)&lt;br /&gt;인터넷 사이트에는 10,000 bytes까지로 되어 있음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Variable&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Locking-Script&lt;/td&gt;
      &lt;td&gt;A script defining the conditions needed to spend the output&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;32-거래-입력값&quot;&gt;3.2 거래 입력값&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;거래 입력값 구성
    &lt;ul&gt;
      &lt;li&gt;소비될 UTXO의 거래 ID: 해당 거래의 해시와 일련번호를 참조하여 한 UXTO를 지시&lt;/li&gt;
      &lt;li&gt;해제 스크립트 : UTXO 소비 요건을 만족하기 위해 지갑을 구성하며 대부분의 해제 스크립트는 비트코인의 소유권을 증명하는 디지털 서명 및 공개키&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;decoderawtransaction 중 vin
    &lt;ul&gt;
      &lt;li&gt;거래 ID(txid): 소비될 UTXO가 담겨 있는 거래를 참조(거래에는 여러 UTXO가 있을 수 있음)&lt;/li&gt;
      &lt;li&gt;출력값 인덱스(vout): 참조 거래에서 어떤 UTXO가 참조될지 식별, 참조 거래 vout배열의 인덱스, 첫번째 UTXO의 값은 0&lt;/li&gt;
      &lt;li&gt;스크립트 시그(scriptSig): 참조된 UTXO의 조건을 만족하며, 소비를 위해 UTXO를 해제, 앨리스의 지갑이 참조된 UTXO를 추적하고 그에 대한 잠금 스크립틀르 점검한 후 잠금 스크립트를 이용해 필요한 해제 스크립트를 만듦&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;참조 거래의 vout 중 소비될 UTXO가 현재 거래의 vin과 연결&lt;/li&gt;
  &lt;li&gt;참조 거래를 getrawtransaction, decoderawtransaction한 뒤 vout을 확인
    &lt;ul&gt;
      &lt;li&gt;입력값이 0.1 BTC임&lt;/li&gt;
      &lt;li&gt;잠금 스크립트(scriptPubKey)를 가지고 있음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Size&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Field&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;32 bytes(little-endian)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Transaction Hash&lt;/td&gt;
      &lt;td&gt;Pointer to the transaction containing the UTXO to be spent&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4 bytes&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Output Index&lt;/td&gt;
      &lt;td&gt;The index number of the UTXO to be spent; first one is 0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1-9 bytes(VarInt)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Unlocking-Script Size&lt;/td&gt;
      &lt;td&gt;Unlocking-Script length in bytes, to follow(실제로 1~9 bytes 중 몇 byte인지 어떻게 확인할 수 있을까?)&lt;br /&gt;인터넷 사이트에는 10,000 bytes까지로 되어 있음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Variable&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Unlocking-Script&lt;/td&gt;
      &lt;td&gt;A script that fulfills the conditions of the UTXO locking script&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4 bytes&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Sequence Number&lt;/td&gt;
      &lt;td&gt;Used for locktime or disabled (0xFFFFFFFF)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;33-거래-수수료&quot;&gt;3.3 거래 수수료&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;비트코인 네트워크를 안전하게 유지해 주는 역할을 하는 비트코인 채굴자들에게 제공하는 일종의 보상금&lt;/li&gt;
  &lt;li&gt;공격자들이 네트워크를 거래로 넘쳐나게 하는 일을 경제적 측면에서 실행 불가능하게 함으로써 그 자체로 보안 매커니즘의 역할도 함&lt;/li&gt;
  &lt;li&gt;비트코인 단위로 체굴되는 거래 가치보다는 킬로바이트 단위의 거래 크기를 근거로 계산&lt;/li&gt;
  &lt;li&gt;비트코인 내의 시장의 힘에 의해 결정&lt;/li&gt;
  &lt;li&gt;채굴자는 수수료 등 여러 가지 기준에 따라 거래의 우선순위를 정함&lt;/li&gt;
  &lt;li&gt;특정 거래에서는 무료 거래를 진행하기도 함&lt;/li&gt;
  &lt;li&gt;비트코인 코어에 수수료 중개(fee relay) 정책이 최소 중개거래 수수료(minrelaytxfee) 옵션에 의해 결정됨&lt;/li&gt;
  &lt;li&gt;거래의 데이터 구조에는 수수료 필드가 없음&lt;/li&gt;
  &lt;li&gt;Fees = Sum(Inputs) - Sum(Outputs)&lt;/li&gt;
  &lt;li&gt;Output에는 반드시 잔액에 대한 출력값도 포함해야 함. 그렇지 않으면 모든 잔액이 수수료로 취급&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-거래-스크립트와-스크립트-언어&quot;&gt;4 거래 스크립트와 스크립트 언어&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;스크립트 언어는 포스(Forth) 언어처럼 구성되고 역폴란드 표기법을 따르는 스택 기반의 실행 언어&lt;/li&gt;
  &lt;li&gt;거래가 유효화될 때 입력값 각각에 들어 있는 해제 스크립트(scriptSig)는 소비 조건을 만족하는지 여부를 알아보기 위해 대응되는 잠금 스크립트(scriptPubKey)와 함께 실행&lt;/li&gt;
  &lt;li&gt;최소한의 프로세싱만 지원하므로 의도적인 보안을 제공&lt;/li&gt;
  &lt;li&gt;Pay-to-Public-Key-Hash 스크립트 기반이나 매우 다양하고 복잡한 조건을 표현하기 위해 잠금 스크립트를 사용할 수 있음&lt;/li&gt;
  &lt;li&gt;튜링 불완전성(Turing Incompleteness)
    &lt;ul&gt;
      &lt;li&gt;스크립트 언어는 조건부 흐름 제어 기능 이외에는 루프나 복잡한 흐름 제어 능력을 가지고 있지 않음 -&amp;gt; 튜링이 완전하지 않음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;무상태 검증(Stateless Verification)
    &lt;ul&gt;
      &lt;li&gt;스크립트 언어는 무상태형&lt;/li&gt;
      &lt;li&gt;스크립트 언어 내에서는 스크립트 실행 전 혹은 실행 후 저장되는 상태가 없음&lt;/li&gt;
      &lt;li&gt;스크립트를 실행하는 데 필요한 모든 정보는 스크립트 내에 담겨 있음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;41-잠금-스크립트locking-script&quot;&gt;4.1 잠금 스크립트(locking script)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;출력값에 위치&lt;/li&gt;
  &lt;li&gt;향후 출력값을 소비하기 위해 충족되어야 하는 요건을 명시&lt;/li&gt;
  &lt;li&gt;역사적으로 보통 공개키 혹은 비트코인 주소(공개키 해시)가 담겨 있기 때문에 스크립트펍키(scriptPubKey)라고 부르기도 했음&lt;/li&gt;
  &lt;li&gt;서명 스크립트(witness script), 암호퍼즐(cryptographic puzzle)들도 추상화되어 모두 같은 개념&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;42-해제-스크립트unlocking-script&quot;&gt;4.2 해제 스크립트(unlocking script)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;임력값에 위치&lt;/li&gt;
  &lt;li&gt;잠금 스크립트가 출력값에 놓아 둔 조건을 해결하거나 충족시켜서 출력값이 소비될 수 있도록 하는 스크립트&lt;/li&gt;
  &lt;li&gt;대부분의 경우 사용자의 지갑이 개인키로부터 생성한 디지털 서명을 담고 있기 때문에 스크립트시그(scriptSig)라고 불림&lt;/li&gt;
  &lt;li&gt;해제 스크립트 전부가 서명을 포함해야 하는 것은 아님&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch6_2.png&quot; alt=&quot;그림2&quot; /&gt;&lt;br /&gt;
그림2 scriptSig 및 scriptPubKey를 결합하여 트랜잭션 스크립트 평가&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;거래 입력값(UTXO참조, 해제 스크립트) -&amp;gt; 참조 거래의 UTXO(잠금 스크립트) -&amp;gt; 스크립트 실행(1.해제 스크립트, 2.잠금 스크립트) -&amp;gt; 입력값 유효화&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;-참고문서&quot;&gt;○ 참고문서&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch06.asciidoc&quot;&gt;bitcoinbook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 07 Mar 2022 11:00:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/03/07/bitcoinbook_ch6.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/03/07/bitcoinbook_ch6.html</guid>
        
        
        <category>all</category>
        
        <category>bitcoin</category>
        
        <category>마스터링 비트코인</category>
        
      </item>
    
      <item>
        <title>마스터링 비트코인 ch5</title>
        <description>&lt;h1 id=&quot;마스터링-비트코인-ch5-지갑&quot;&gt;마스터링 비트코인 ch5 지갑&lt;/h1&gt;

&lt;h2 id=&quot;1-서론---지갑&quot;&gt;1. 서론 - 지갑&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;사용자 인터페이스 역할을 하는 주요 어플리케이션&lt;/li&gt;
  &lt;li&gt;사용자의 키를 저장하고 관리하는데 사용되는 데이터 구조&lt;/li&gt;
  &lt;li&gt;구조 파일이나 데이터베이스로 구현되는 개인키 저장소&lt;/li&gt;
  &lt;li&gt;개인키/공개키 쌍이 담겨있는 열쇠고리&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-지갑-기술의-개요&quot;&gt;2. 지갑 기술의 개요&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;지갑의 분류는 비결정적 지갑, 결정적 지갑으로 나뉜다.
    &lt;blockquote&gt;
      &lt;p&gt;비트코인 지갑에는 키만 들어있으며, 코인은 들어있지 않다.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;21-비결정적-지갑&quot;&gt;2.1 비결정적 지갑&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;각각의 키가 난수 생성기로부터 독립적으로 생성&lt;/li&gt;
  &lt;li&gt;지갑 내 키들은 서로 연관성 없음&lt;/li&gt;
  &lt;li&gt;무작위로 생성한 후 필요한 만큼 추가로 생성하며, 각 키들은 단 한번만 사용
    &lt;ul&gt;
      &lt;li&gt;무작위로 뽑은 키들이 한번 생성된 후에는 모두 복사본을 보관해야 함&lt;/li&gt;
      &lt;li&gt;지갑이 자주 백업되어야 함&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;주소를 다시 사용하게 되면 여러 건의 거래와 주소가 연관되기 때문에 프라이버시 노출&lt;/li&gt;
  &lt;li&gt;JBOK지갑(Just a Bunch Of Keys)&lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_1.png&quot; alt=&quot;그림1&quot; /&gt;&lt;br /&gt;
그림1 비결정적 지갑: 무작위로 생성된 키 모음&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;22-결정적-지갑&quot;&gt;2.2 결정적 지갑&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;단일 시드(Seed)로부터 많은 키를 쉽게 얻기 위해 개발&lt;/li&gt;
  &lt;li&gt;모든 키가 시드(Seed)라고 알려져있는 하나의 마스터 키에서 파생&lt;/li&gt;
  &lt;li&gt;지갑 내 모든 키들은 서로 연관&lt;/li&gt;
  &lt;li&gt;시드(Seed) 원본을 가지고 있으면 누구나 다시 지갑 생성 가능&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;221-일반-결정적-지갑&quot;&gt;2.2.1 일반 결정적 지갑&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;일반적으로 해시 함수를 이용하여 공통 시드에서 얻은 개인키 보관&lt;/li&gt;
  &lt;li&gt;시드는 개인키를 추출하기 위해 색인번호나 ‘체인코드’등의 여러 데이터와 무작위로 생성된 숫자가 결합되어 있는 형태&lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_2.png&quot; alt=&quot;그림2&quot; /&gt;&lt;br /&gt;
그림2 결정적(Seed) 지갑: 시드에서 파생된 결정론적 키 시퀀스&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;222-hd계층결정적-지갑-bip-32bip-44&quot;&gt;2.2.2 HD(계층결정적) 지갑 [BIP-32/BIP-44]&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;결정적 지갑 중 가장 발달된 유형&lt;/li&gt;
  &lt;li&gt;트리 구조에서 생성된 키 보관&lt;/li&gt;
  &lt;li&gt;BIP-32표준에서 규정
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_3.png&quot; alt=&quot;그림3&quot; /&gt;&lt;br /&gt;
그림3 결정적 지갑: 단일 시드에서 생성된 키 트리
    &lt;blockquote&gt;
      &lt;p&gt;사용자들이 공개키에 대응하는 개인키에 접근하지 않고도 공개키 열을 생성할 수 있음. 안전하지 않은 서버 상에서나 수신 기능만을 가지고 있는 서버에서도 HD지갑 사용 가능하며 각각의 거래에 대해 다른 공개키를 발급 받을 수 있음&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-자세한-지갑-기술&quot;&gt;3. 자세한 지갑 기술&lt;/h2&gt;
&lt;p&gt;비트코인 지갑 기술이 발전함에 따라 상호운용성, 편리성, 안전성, 유연성 강화를 위한 공통의 산업 표준이 등장&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;BIP-39 기반 연상기호 코드 워드&lt;/li&gt;
  &lt;li&gt;BIP-32 기반 HD 지갑&lt;/li&gt;
  &lt;li&gt;BIP-43 기반 다용도 HD 지갑 구조&lt;/li&gt;
  &lt;li&gt;BIP-44 기반 복수 계좌&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;31-bip-39-기반-연상기호-코드-워드&quot;&gt;3.1 BIP-39 기반 연상기호 코드 워드&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;결정적 지갑을 추출하기 위해 시드를 이용한 난수를 인코딩 하는 영어 단어열[니모닉(Mnemonic) 코드 워드]&lt;/li&gt;
  &lt;li&gt;단어열만 있으면 시드를 재현할 수 있고, 시드에서 지갑과 추출키 전부를 재현할 수 있다.&lt;/li&gt;
  &lt;li&gt;연상기호 코드는 무작위 순열에 비해 쉽게 읽히고 정확하게 입력되기 때문에 사용자들이 지갑을 백업하는 작업을 더욱 수월하게 해준다.&lt;/li&gt;
  &lt;li&gt;연상기호 코드를 이용해 결정론적 지갑을 실행하는 지갑 어플리케이션은 처음 지갑을 생성할 때 12-24 단어로 구성된 단어열을 사용자에게 보여준다. 단어열은 지갑을 백업해 놓은 것으로 동일한 지갑 어플리케이션이나 호환가능한 지갑 어플리케이션안에 들어있는 키 전부를 복원하고 재현하는데 사용할 수 있다.
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_4.png&quot; alt=&quot;그림4&quot; /&gt;
그림4 엔트로피 생성해서 연상기호 워드로 인코딩 과정&lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_5.png&quot; alt=&quot;그림5&quot; /&gt;
그림5 니모닉에서 시드로
    &lt;blockquote&gt;
      &lt;p&gt;2048 라운드의 해싱이 포함된 키 홛장 기능은 니모닉 또는 암호 문구에 대한 무차별 대입 공격에 대해 효과적인 보호 기능(계산시 많은 비용 소모)&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-시드로부터-hd-지갑-생성&quot;&gt;3.2 시드로부터 HD 지갑 생성&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;128, 256, 512비트 크기의 무작위 숫자인 루트 시드(Root Seed) 한개로부터 생성된다. 이 시드는 연상기호에 생성되는 것이 가장 일반적&lt;/li&gt;
  &lt;li&gt;모든 키들은 이 루트 시드로부터 결정적으로 추출되며, 이 루트 시드 덕분에 호환 가능한 어떤 HD 지갑에서도 HD 지갑 전체를 재현할 수 있다. 수천 혹은 수백만 개의 키를 담고 있는 HD 지갑 이라도 루트 시다만 전송하면 백업이나 복원, export, import가 가능&lt;/li&gt;
  &lt;li&gt;루트 시드는 HMAC-SHA512 알고리즘에 입력되고, 그 결과로 나온 해시값이 마스터 개인키와 마스터 체인코드를 생성&lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch5_6.png&quot; alt=&quot;그림6&quot; /&gt;
그림6 루트 시드에서 마스터 키와 체인코드 생성&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;-참고문서&quot;&gt;○ 참고문서&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch05.asciidoc&quot;&gt;bitcoinbook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 28 Feb 2022 10:42:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/28/bitcoinbook_ch5.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/28/bitcoinbook_ch5.html</guid>
        
        
        <category>all</category>
        
        <category>bitcoin</category>
        
        <category>마스터링 비트코인</category>
        
      </item>
    
      <item>
        <title>마스터링 비트코인 ch4 addr code error</title>
        <description>&lt;h1 id=&quot;마스터링-비트코인-ch4-addr-error-bitcoinbitcoinhpp-no-such-file-or-directory&quot;&gt;마스터링 비트코인 ch4 addr error. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bitcoin/bitcoin.hpp: no such file or directory&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;마스터링 비트코인 ch4장에 나오는 cpp 예제 중 addr.cpp 아래 소스대로 되어야 할 부분이 버전 문제인지 에러가 발생&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;No package &apos;libbitcoin&apos; found fatal error: bitcoin/bitcoin.hpp: No such file or directory&lt;/code&gt;&lt;br /&gt;
찾아보니 libbitcoin 라이브러리가 최신 버전으로 설치되어 있어 소스를 수정 했다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;예제&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Compile the addr.cpp code
$ g++ -o addr addr.cpp -std=c++11 $(pkg-config --cflags --libs libbitcoin)
# Run the addr executable
$ ./addr
Public key: 0202a406624211f2abbdc68da3df929f938c3399dd79fac1b51b0e4ad1d26a47aa
Address: 1PRTTaJesdNovgne6Ehcdu1fpEdX7913CK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;에러&lt;/strong&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch4_addr1.png&quot; alt=&quot;addr error&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;소스수정&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;addr.cpp

#include &amp;lt;bitcoin/bitcoin.hpp&amp;gt; 
------------------------------  
#include &amp;lt;bitcoin/system.hpp&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;실행명령어 추가(–static)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ g++ -o addr ./addr.cpp -std=c++11 $(pkg-config --cflags --libs --static libbitcoin-system)
$ ./addr
Public key: 0202a406624211f2abbdc68da3df929f938c3399dd79fac1b51b0e4ad1d26a47aa
Address: 1PRTTaJesdNovgne6Ehcdu1fpEdX7913CK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이래도 안될시 PKG_CONFIG_PATH가 안잡혀 있을 수 있다. home root에 ln 설정 해주면 해결&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vi  ~/.bahrc
export PKG_CONFIG_PATH=/path/to/libbitcoin-installation/lib/pkgconfig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 24 Feb 2022 13:10:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/issue/2022/02/24/bitcoinbook_ch4_addr_code_issue.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/issue/2022/02/24/bitcoinbook_ch4_addr_code_issue.html</guid>
        
        
        <category>all</category>
        
        <category>bitcoin</category>
        
        <category>마스터링 비트코인</category>
        
        <category>issue</category>
        
      </item>
    
      <item>
        <title>마스터링 비트코인 ch4</title>
        <description>&lt;h1 id=&quot;마스터링-비트코인-ch4-keys-address&quot;&gt;마스터링 비트코인 ch4 Keys, Address&lt;/h1&gt;
&lt;p&gt;이번 장은 비트코인 암호화 관련된 내용인데 암호화 관련 지식이 없어 내용을 이해하는데 어려움이 생긴다.&lt;br /&gt;
수학적 내용까지 완벽히 이해 하기 어려우니 겉으로나마 진도를 빼기 위해서 다음 장을 넘어가려고 한다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;암호화는 비밀을 공개하지 않고 비밀에 대한 지식을 증명하거나(디지털 서명) 데이터의 진위를 증명하는데 사용할 수도 있다.(비트코인 주소)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;1-서론&quot;&gt;1. 서론&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;비트코인에 대한 소유권은 ‘디지털 키, 비트코인 주소, 디지털 서명’으로 성립&lt;/li&gt;
  &lt;li&gt;디지털 키는 실제로 네트워크에 저장되는 것이 아님, 사용자가 지갑이라는 파일 또는 간단한 데이터베이스에 저장&lt;/li&gt;
  &lt;li&gt;키는 개인(private)키와 공개(public)키로 구성된 쌍으로 구성&lt;/li&gt;
  &lt;li&gt;비트코인 시스템은 탈중앙화된 기술로 이루어져 있음&lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch4_1.png&quot; alt=&quot;그림1&quot; /&gt;
그림1 개인키, 공개키 주소 변환 과정&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-개인키private-key&quot;&gt;2. 개인키(Private Key)&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;무작위로 추출된 숫자(randomly)&lt;/li&gt;
  &lt;li&gt;OS 내부의 난수생성기를 이용 256비트의 난수 생성&lt;/li&gt;
  &lt;li&gt;16진수로 표기시 64자리&lt;/li&gt;
  &lt;li&gt;잃어버리면 다신 찾을 수 없다!
    &lt;blockquote&gt;
      &lt;p&gt;개인키는 1에서 n-1 사이의 암호화를 사용한 방법으로 생성되는 랜덤수. n은 1.158*10^77 로 2^256 보다 작은 수&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;21-공개키-주소-출력&quot;&gt;2.1 공개키 주소 출력&lt;/h3&gt;
&lt;p&gt;bitcoin core가 출력하는 개인키는 WIF(Wallet Import Format)라 불리는 checksum을 사용하는 Base64로 인코딩&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bitcoind -regtest -daemon # 비트코인 로컬 테스트 모드 가동

$ bitcoin-cli -testnet createwallet testuser1 # tesetuser1 이라는 로컬 지갑 생성

$ bitcoin-cli -regtest getnewaddress testuser1 # 공개키 주소 출력
bcrt1qwqun64v25383jx27y2nnwrfys9wmdegrkth0s9

$ bitcoin-cli -regtest dumpprivkey bcrt1qwqun64v25383jx27y2nnwrfys9wmdegrkth0s9 # 개인키 주소 출력
cUHyunoR5DXoASGDZ8ruvVbELyqEKAErbS8Y8coZeFwiCRb3pCqw

$ ./bx seed | ./bx ec-new | ./bx ec-to-wif
KzkpWYY7QZmV2v4U3LMHj3d1DBj3DTAchzy9jVpBfV5oh2bTY2KL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3-공개키public-key&quot;&gt;3. 공개키(Public Key)&lt;/h2&gt;
&lt;p&gt;타원 곡선 곱셈을 사용하여 개인키에서 계산된다. 겉할기 수준으로 이해를 하고 넘어가자…&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;bitcon core에서는 specp256k1 최적화 C라이브러리를 사용 정의&lt;/li&gt;
  &lt;li&gt;타원 곡선 함수는 비대칭 함수, 단방향으로는 계산이 쉽지만, 반대 방향으로의 계산은 매우 어려움&lt;/li&gt;
  &lt;li&gt;K(공개키) = k(주의:개인키 아님) * G
    &lt;ul&gt;
      &lt;li&gt;G는 타원곡선 상의 한점(x, y)으로 정의&lt;/li&gt;
      &lt;li&gt;타원 곡선 함수의 연산은 덧셈의 반복
        &lt;ul&gt;
          &lt;li&gt;kG = G + G + G + … + G (k times)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;타원 곡선 그래프는 G를 포함한 접선을 그어 G가 아닌 타원 곡선 그래프 상에 임의의 접점을 구하여 x축 대칭을 시키는 과정을 반복&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch4_2.png&quot; alt=&quot;그림2&quot; /&gt;
그림2 타원 곡선 함수 계산 과정&lt;/p&gt;

&lt;h2 id=&quot;4-비트코인-주소bitcoin-address&quot;&gt;4. 비트코인 주소(Bitcoin Address)&lt;/h2&gt;
&lt;p&gt;단방향 암호화 해싱을 통해 공개키에서 파생된다.
SHA256 함수와 RIPEMD160 함수를 사용. 두 해시함수를 연속적으로 적용하는 함수 HASH160
생성된 공개키 해시 값을 Base58Check으로 인코딩 함수를 사용해서 주소를 생성. 이를 비트코인 주소라 한&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch4_3.png&quot; alt=&quot;그림3&quot; /&gt;&lt;br /&gt;
그림3 공개키에서 비트코인 주소 생성 절차&lt;/p&gt;

&lt;h2 id=&quot;5-key-formats&quot;&gt;5. Key Formats&lt;/h2&gt;
&lt;p&gt;사용자가 오류 없이 키를 쉽게 일고 쓸 수 있도록 하기 위해 사용&lt;/p&gt;
&lt;h3 id=&quot;51-개인키-formats&quot;&gt;5.1 개인키 formats&lt;/h3&gt;
&lt;p&gt;개인키는 256비트 -&amp;gt; 32바이트 -&amp;gt; 16진수 표현 64자리 &lt;br /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/hanscom95/hanscom95.github.io/master/static/img/_posts/bitcoinbook_ch4_4.png&quot; alt=&quot;그림4&quot; /&gt;&lt;br /&gt;
그림4 개인키 포맷&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ./bx wif-to-ec KzkpWYY7QZmV2v4U3LMHj3d1DBj3DTAchzy9jVpBfV5oh2bTY2KL
69841009fdbb8dac05e7dbe2d093fe1d8d36e050ac84db0c5a0641c36e45615f

$ ./bx base58check-decode KzkpWYY7QZmV2v4U3LMHj3d1DBj3DTAchzy9jVpBfV5oh2bTY2KL
wrapper
{
    checksum 1133447052
    payload 69841009fdbb8dac05e7dbe2d093fe1d8d36e050ac84db0c5a0641c36e45615f01
    version 128
}

$ ./bx base58check-encode 69841009fdbb8dac05e7dbe2d093fe1d8d36e050ac84db0c5a0641c36e45615f01 --version 128
KzkpWYY7QZmV2v4U3LMHj3d1DBj3DTAchzy9jVpBfV5oh2bTY2KL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;52-공개키-formats&quot;&gt;5.2 공개키 formats&lt;/h3&gt;

&lt;p&gt;아래 예제는 python으로 작성된 key format code이다.(Running key-to-address-ecc-example.py)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ python3 key-to-address-ecc-example.py
Private Key (hex) is:  6aab09ee2dfc3eb7e75638ca5ff4bf43e2728940feeb8fba5c3d8f916678cf70
Private Key (decimal) is:  48247361334930589481594495841992059859843736875128270815753879940829604794224
Private Key (WIF) is:  5JdGGvxhv3ifJSEvZTPdXKUnH9rzBzMTmiG4c64CRETKvmsha1z
Private Key Compressed (hex) is:  6aab09ee2dfc3eb7e75638ca5ff4bf43e2728940feeb8fba5c3d8f916678cf7001
Private Key (WIF-Compressed) is:  Kzo4RKAsb8zt3xQTQFUtCpZcrJ7dRW9KAM7UusK7PxPCXtZ9rDNK
Public Key (x,y) coordinates is: (95688209842730219301716110657101962663481178475860448940458861642428423340491, 38591482754941261609609094707882578042805919665486369567852338041417468276141)
Public Key (hex) is: 04d38d9b84f81fd70c54a868ef3163dc895cba53d53766513ae6c010ce01fc01cb55520153fcdda15b8586752f589f161c1157e1d19fe57a3997a3f8e5bdc0edad
Compressed Public Key (hex) is: 03d38d9b84f81fd70c54a868ef3163dc895cba53d53766513ae6c010ce01fc01cb
Bitcoin Address (b58check) is: 1EDAkoYYX2bkHJGbeFnQa962KoEoTYRWVy
Compressed Bitcoin Address (b58check) is: 1A5Ec43i2hSKb4Z1M9vMNWBQoefh8wsFLy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;아래 코드 진행시 버전 차이로 인해 error 발생 코드 수정&lt;br /&gt;
(참조 &lt;a href=&quot;https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/issue/2022/02/24/bitcoinbook_ch4_addr_code_issue.html&quot;&gt;ch4 addr error&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ g++ -o addr ./addr.cpp -std=c++11 $(pkg-config --cflags --libs --static libbitcoin-system)
$ ./addr
Public key: 0202a406624211f2abbdc68da3df929f938c3399dd79fac1b51b0e4ad1d26a47aa
Address: 1PRTTaJesdNovgne6Ehcdu1fpEdX7913CK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;-참고문서&quot;&gt;○ 참고문서&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch04.asciidoc&quot;&gt;bitcoinbook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 24 Feb 2022 12:00:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/24/bitcoinbook_ch4.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/24/bitcoinbook_ch4.html</guid>
        
        
        <category>all</category>
        
        <category>bitcoin</category>
        
        <category>마스터링 비트코인</category>
        
      </item>
    
      <item>
        <title>마스터링 비트코인 ch3</title>
        <description>&lt;h1 id=&quot;마스터링-비트코인-ch3-비트코인-코어참조구현개발환경-세팅&quot;&gt;마스터링 비트코인 ch3 비트코인 코어:참조구현(개발환경 세팅)&lt;/h1&gt;
&lt;p&gt;비트코인 코어 3장 개발환경 세팅&lt;br /&gt;
풀 인덱스 노드 설정&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;개발환경&lt;/strong&gt;&lt;br /&gt;
docker 20.10.8 / Ubuntu 20.04 / BitcoinCore v22.0 / HDD 4tb / RAM 32GB&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apt-get update
$ apt-get upgrade
$ apt-get install git
$ git clone https://github.com/bitcoin/bitcoin.git
$ git checkout v22.0
$ git status
$ apt-get install build-essential libtool autotools-dev automake pkg-config bsdmainutils python3
$ apt-get install libevent-dev libboost-dev
$ apt-get install libdb4.8-dev libdb4.8++-dev
$ apt-get install libqrencode-dev autoconf openssl libssl-dev libevent-dev
$ apt install libsqlite3-dev
$ apt install libminiupnpc-dev libnatpmp-dev
$ apt install systemtap-sdt-dev

$ ./autogen.sh
$ ./configure BDB_LIBS=&quot;/home/ubuntu/bitcoin/db4/lib -ldb_cxx-4.8&quot; BDB_CFLAGS=&quot;/home/ubuntu/bitcoin/db4/include&quot; --without-gui -prefix=/home/ubuntu/bitcoin/
$ ./contrib/install_db4.sh `pwd`
$ make
$ make install

$ bitcoind -datadir=/home/ubuntu/bitcoin/data -daemon
$ bitcoind -printconsole
$ chmod 766 -R ./data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;설치가 성공적으로 끝나면 API테스트&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bitcoin-cli getblockchaininfo
{
    &quot;version&quot;: 150000, 
    &quot;subversion&quot;: &quot;/Satoshi:0.15.0/&quot;, 
    &quot;protocolversion&quot;: 70015, 
    &quot;localservices&quot;: &quot;000000000000000d&quot;, 
    &quot;localrelay&quot;: true, 
    &quot;timeoffset&quot;: 0, 
    &quot;networkactive&quot;: true, 
    &quot;connections&quot;: 8, 
    &quot;networks&quot;: [ 
    ... 
    detailed information about all networks (ipv4, ipv6 or onion) 
    ... 
    ], 
    &quot;relayfee&quot;: 0.00001000, 
    &quot;incrementalfee&quot;: 0.00001000, 
    &quot;localaddresses&quot;: [ 
    ], 
    &quot;warnings&quot;: &quot;”
}

$ bitcoin-cli getblockhash 1000
00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09

$ bitcoin-cli getrawtransaction 7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18
0100000001524d288f25cada331c298e21995ad070e1d1a0793e818f2f7cfb5f6122ef3e71000000008c493046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d014104e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8dffffffff0180969800000000001976a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac00000000

$ bitcoin-cli decoderawtransaction 0100000001524d288f25cada331c298e21995ad070e1d1a0793e818f2f7cfb5f6122ef3e71000000008c493046022100a59e516883459706ac2e6ed6a97ef9788942d3c96a0108f2699fa48d9a5725d1022100f9bb4434943e87901c0c96b5f3af4e7ba7b83e12c69b1edbfe6965f933fcd17d014104e5a0b4de6c09bd9d3f730ce56ff42657da3a7ec4798c0ace2459fb007236bc3249f70170509ed663da0300023a5de700998bfec49d4da4c66288a58374626c8dffffffff0180969800000000001976a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac00000000
{
  &quot;txid&quot;: &quot;7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18&quot;,
  &quot;hash&quot;: &quot;7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18&quot;,
  &quot;version&quot;: 1,
  &quot;size&quot;: 225,
  &quot;vsize&quot;: 225,
  &quot;weight&quot;: 900,
  &quot;locktime&quot;: 0,
  &quot;vin&quot;: [
    ... 
  ],
  &quot;vout&quot;: [
    {
      &quot;value&quot;: 0.10000000,
      &quot;n&quot;: 0,
      &quot;scriptPubKey&quot;: {
        &quot;asm&quot;: &quot;OP_DUP OP_HASH160 7f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a8 OP_EQUALVERIFY OP_CHECKSIG&quot;,
        &quot;hex&quot;: &quot;76a9147f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a888ac&quot;,
        &quot;address&quot;: &quot;1Cdid9KFAaatwczBwBttQcwXYCpvK8h7FK&quot;,
        &quot;type&quot;: &quot;pubkeyhash&quot;
      }
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 23 Feb 2022 15:00:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/23/bitcoinbook_ch3.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/bitcoin/%EB%A7%88%EC%8A%A4%ED%84%B0%EB%A7%81%20%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8/2022/02/23/bitcoinbook_ch3.html</guid>
        
        
        <category>all</category>
        
        <category>bitcoin</category>
        
        <category>마스터링 비트코인</category>
        
      </item>
    
      <item>
        <title>wellcome to taehoon blog</title>
        <description>&lt;h1 id=&quot;개발공부를-위해-오픈한-블로그&quot;&gt;개발공부를 위해 오픈한 블로그&lt;/h1&gt;
&lt;p&gt;개발에 관한 내용 올리기 위해 블로그를 열었다.&lt;br /&gt;
회사에서 하는 업무나 하고 싶은 개발 스터디가 있음 포스팅 해야지…&lt;br /&gt;
아 1일 1커밋도 이거 떄문에 할 수 있으려나…&lt;br /&gt;
여행 가고 싶다아…&lt;/p&gt;
</description>
        <pubDate>Mon, 21 Feb 2022 15:05:00 +0900</pubDate>
        <link>https://hanscom95.github.io/all/2022/02/21/welcome-to-taehoon_blog.html</link>
        <guid isPermaLink="true">https://hanscom95.github.io/all/2022/02/21/welcome-to-taehoon_blog.html</guid>
        
        
        <category>all</category>
        
      </item>
    
  </channel>
</rss>
